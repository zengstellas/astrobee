<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: Bag Processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.16.3</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robot operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bag_processing.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Bag Processing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md567"></a>
Package Overview</h1>
<p>The bag processing package provides several helper tools for handling bagfiles.</p>
<h1><a class="anchor" id="autotoc_md568"></a>
Usage Instructions</h1>
<p>For each script, run <code>rosrun bag_processing script_name.py -h</code> for further details and usage instructions.</p>
<h1><a class="anchor" id="autotoc_md569"></a>
Scripts</h1>
<h2><a class="anchor" id="autotoc_md570"></a>
&lt;tt&gt;apply_histogram_equalization_to_images&lt;/tt&gt;</h2>
<p>Applies either CLAHE or standard histogram equalization to images in a bagfile.</p>
<h2><a class="anchor" id="autotoc_md571"></a>
&lt;tt&gt;bmr_renumber_enum&lt;/tt&gt;</h2>
<p>This is not a standalone script. It is a library that provides utility functions to be used in *.bmr bag migration rules to help with migrating legacy messages that contain an enumerated field where the label numbering has changed.</p>
<h2><a class="anchor" id="autotoc_md572"></a>
&lt;tt&gt;check_bag_for_gaps&lt;/tt&gt;</h2>
<p>Prints gaps above provided maximum time for a bagfile and topic using either message header times or bag receive times. Also prints stats for the time differences for messages with the provided topic in the bagfile.</p>
<h2><a class="anchor" id="autotoc_md573"></a>
&lt;tt&gt;clock_skew&lt;/tt&gt;</h2>
<p>Analyze clock skew LLP-&gt;MLP and HLP-&gt;MLP. Inputs an <code>ars_default.bag</code> containing the <code>/mgt/sys_monitor/time_sync</code> topic.</p>
<h2><a class="anchor" id="autotoc_md574"></a>
&lt;tt&gt;convert_bayer&lt;/tt&gt;</h2>
<p>Converts bayer encoded color images to grayscale and color image.</p>
<h2><a class="anchor" id="autotoc_md575"></a>
&lt;tt&gt;convert_all_bayer_bags&lt;/tt&gt;</h2>
<p>Creates a new bagfile with grayscale and color images for the provided bags using their bayer encoded images. If no bags are provided, runs conversion for each bag in the current directory.</p>
<h2><a class="anchor" id="autotoc_md576"></a>
&lt;tt&gt;csv_join&lt;/tt&gt;</h2>
<p>Join two CSV files by timestamp. (After creating the CSV files by exporting a message topic from a bag.)</p>
<h2><a class="anchor" id="autotoc_md577"></a>
&lt;tt&gt;get_msg_stats&lt;/tt&gt;</h2>
<p>Prints stats for a numeric field of a topic in a bagfile.</p>
<h2><a class="anchor" id="autotoc_md578"></a>
&lt;tt&gt;merge_bags&lt;/tt&gt;</h2>
<p>Merges bagfiles with given prefix in the current directory.</p>
<h2><a class="anchor" id="autotoc_md579"></a>
&lt;tt&gt;merge_all_bags&lt;/tt&gt;</h2>
<p>Creates merged bagfiles for each provided bag prefix or for each prefix in the current directory if none are provided.</p>
<h2><a class="anchor" id="autotoc_md580"></a>
&lt;tt&gt;rosbag_detect_bad_topics&lt;/tt&gt;</h2>
<p>Detect bad topics that the <code>rosbag</code> API can't handle. (The main problem so far has been <code>rosjava</code> messages that have incomplete message definition dependency information that causes <code>rosbag</code> to raise an exception when it tries to deserialize the message.)</p>
<h2><a class="anchor" id="autotoc_md581"></a>
&lt;tt&gt;rosbag_fix_all&lt;/tt&gt;</h2>
<p>Master script to apply all passes of processing needed to fix our legacy bag files. The actual processing steps are found in <code>Makefile.rosbag_fix_all</code>. The strategy is explained in [1].</p>
<p>[1] <a href="https://github.com/nasa/astrobee/blob/develop/doc/general_documentation/maintaining_telemetry.md">https://github.com/nasa/astrobee/blob/develop/doc/general_documentation/maintaining_telemetry.md</a></p>
<h2><a class="anchor" id="autotoc_md582"></a>
&lt;tt&gt;rosbag_rewrite_types&lt;/tt&gt;</h2>
<p>Tool that applies rules to fix bag files, as specified in <code>rosbag_rewrite_types_rules.json</code>. It performs two types of fix:</p>
<ol type="1">
<li>Fix incomplete message definition metadata, as written by <code>rosjava</code> nodes. Which topics to fix is specified in the <code>fix_message_definition_topic_patterns</code> field of the rules file.</li>
<li>For message types whose definition changed in a way that makes migration infeasible, changes the message type name to be the "frozen" type name, so that migration is not needed. Which message types to fix is specified in the <code>rename_types</code> field of the rules file.</li>
</ol>
<p>This script is normally invoked by <code>rosbag_fix_all</code>.</p>
<h2><a class="anchor" id="autotoc_md583"></a>
&lt;tt&gt;rosbag_topic_filter&lt;/tt&gt;</h2>
<p>Filter <code>rosbag</code> messages based on topic. Like a subset of <code>rosbag filter</code> functionality, but more robust to incomplete message definitions because it doesn't need to deserialize the messages to filter on topic.</p>
<h2><a class="anchor" id="autotoc_md584"></a>
&lt;tt&gt;splice_bag&lt;/tt&gt;</h2>
<p>Interactively splices a bagfile at selected timestamps to create multiple smaller bagfiles, which when combined span the original bagfile. Iterates through the bagfile images to allow the user to select splice points.</p>
<h2><a class="anchor" id="autotoc_md585"></a>
&lt;tt&gt;trim_bag&lt;/tt&gt;</h2>
<p>Creates a new bagfile with trimmed start and end times from a provided bagfile. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
</body>
</html>
